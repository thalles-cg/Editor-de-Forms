<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>EdiT</title>
    <link rel="stylesheet" href="style.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0"
    />
  </head>
  <body>
    <header>
      <div class="navbar">
        <h1 class="logo">EdiT</h1>
        <ul>
          <li><a href="#">Forms</a></li>
          <li><a href="#">Cabeçalho</a></li>
          <li><a href="#">Menu</a></li>
          <li><a href="#">Galeria</a></li>
        </ul>
      </div>
    </header>
    <main>
      <section class="edit-field">
        <button class="addForm">Adicionar formulário</button>

        <div class="properties">
          <h2>Propriedades</h2>
          <div class="specific-properties">
            <h3 class="properties-category">Label</h3>
            <div class="category-desc">
              <div class="option-line with-color">
                <div class="property-option checkbox">
                  <label for="addLabel">Ativar</label>
                  <input type="checkbox" id="addLabel" />
                </div>
                <div class="property-option">
                  <label for="addColor">Cor</label>
                  <input type="color" id="addColor" value="#FFFFFF" />
                </div>
              </div>
              <div class="option-line dark">
                <div class="property-option text">
                  <label for="addText">Texto:</label>
                  <input type="text" id="addText" maxlength="15" />
                </div>
              </div>
            </div>
            <h3 class="properties-category">Input</h3>
            <div class="category-desc">
              <div class="option-line">
                <div class="property-option types">
                  <label for="choose-type">Tipo</label>
                  <select name="choose-type" id="choose-type">
                    <option value="">- Selecione -</option>
                    <option value="text">text</option>
                    <option value="email">email</option>
                    <option value="password">password</option>
                    <option value="number">number</option>
                    <option value="date">date</option>
                  </select>
                </div>
              </div>

              <div class="option-line dark">
                <div class="property-option text">
                  <label for="addPlaceholder">Placeholder:</label>
                  <input type="text" id="addPlaceholder" maxlength="15" />
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
      <section class="form-box">
        <div class="form-box-title"></div>
        <div class="form-content"></div>
      </section>
      <section class="general-properties">
        <h2>Propriedades gerais</h2>
        <div class="properties-content">
          <h3 class="properties-category">Título</h3>
          <div class="category-desc">
            <div class="option-line dark">
              <div class="property-option text">
                <label for="titleText">Texto:</label>
                <input
                  type="text"
                  id="titleText"
                  maxlength="30"
                  value="Título principal"
                />
              </div>
            </div>
            <div class="option-line">
              <div class="property-option range">
                <label for="titleFontSize">Tamanho da fonte:</label>
                <input
                  type="range"
                  id="titleFontSize"
                  min="10"
                  max="50"
                  value="32"
                />
                <span id="titleSizeValue">32px</span>
              </div>
            </div>
            <div class="option-line dark">
              <div class="property-option">
                <label for="titleColor">Cor do título:</label>
                <input type="color" id="titleColor" value="#5865f2" />
              </div>
            </div>
          </div>
        </div>
        <div class="properties-content">
          <h3 class="properties-category">Formulário</h3>
          <div class="category-desc">
            <div class="option-line">
              <div class="property-option range">
                <label for="formWidth">Largura:</label>
                <input
                  type="range"
                  id="formWidth"
                  min="100"
                  max="400"
                  value="200"
                />
                <span id="widthValue">200px</span>
              </div>
            </div>
            <div class="option-line dark">
              <div class="property-option range">
                <label for="formHeight">Altura:</label>
                <input
                  type="range"
                  id="formHeight"
                  min="10"
                  max="50"
                  value="25"
                />
                <span id="heightValue">20px</span>
              </div>
            </div>
          </div>

          <h3 class="properties-category">Cores</h3>
          <div class="category-desc">
            <div class="option-line">
              <div class="property-option">
                <label for="bgColor">Fundo:</label>
                <input type="color" id="bgColor" value="#242424" />
              </div>
            </div>
            <div class="option-line dark">
              <div class="property-option">
                <label for="borderColor">Borda da caixa:</label>
                <input type="color" id="borderColor" value="#5865f2" />
              </div>
            </div>
            <div class="option-line">
              <div class="property-option">
                <label for="inputColor">Input:</label>
                <input type="color" id="inputColor" value="#242424" />
              </div>
            </div>
            <div class="option-line dark">
              <div class="property-option">
                <label for="inputBorderColor">Borda do input:</label>
                <input type="color" id="inputBorderColor" value="#5865f2" />
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>
    <script>
      let i = 0;

      document
        .querySelector(".addForm")
        .addEventListener("click", adicionarForm);

      function adicionarForm() {
        let novaDiv = document.createElement("div");
        novaDiv.classList.add("input-group");

        let editBtn = document.createElement("button");
        editBtn.classList.add("edit-btn");

        let editIcon = document.createElement("span");
        editIcon.classList.add("material-symbols-outlined", "edit-icon");
        editIcon.textContent = "edit";
        editBtn.appendChild(editIcon);

        editBtn.addEventListener("click", function () {
          abrirPropriedades(novaDiv);
        });

        let removeBtn = document.createElement("button");
        removeBtn.classList.add("remove-btn");
        removeBtn.textContent = "x";

        removeBtn.addEventListener("click", function () {
          if (elementoSelecionado === novaDiv) {
            const menu = document.querySelector(".specific-properties");
            menu.classList.remove("active");
            elementoSelecionado = null;
          }
          novaDiv.remove();
        });

        let groupButtons = document.createElement("div");
        groupButtons.classList.add("group-buttons");
        groupButtons.appendChild(editBtn);
        groupButtons.appendChild(removeBtn);

        if (i == 0) {
          let boxTitle = document.createElement("h2");
          boxTitle.textContent = "Título principal";
          let box = document.querySelector(".form-box-title");

          box.appendChild(boxTitle);
        }

        let novoLabel = document.createElement("label");
        novoLabel.setAttribute("for", i);
        novoLabel.textContent = "Título " + i;

        let novoInput = document.createElement("input");
        novoInput.setAttribute("id", i++);

        let widthAtual = document.getElementById("formWidth").value + "px";
        novaDiv.style.width = widthAtual;

        let heightAtual = document.getElementById("formHeight").value + "px";
        novoInput.style.height = heightAtual;

        let corInputAtual = document.getElementById("inputColor").value;
        novoInput.style.backgroundColor = corInputAtual;

        let corBorderAtual = document.getElementById("inputBorderColor").value;
        novoInput.style.borderColor = corBorderAtual;

        let corFonteAtual = document.getElementById("fontColor").value;
        novoInput.style.color = corFonteAtual;

        let corLabelAtual = document.getElementById("addColor").value;
        novoLabel.style.color = corLabelAtual;

        novaDiv.appendChild(novoLabel);
        novaDiv.appendChild(novoInput);
        novaDiv.appendChild(groupButtons);

        document.querySelector(".form-content").appendChild(novaDiv);

        document
          .getElementById("fontColor")
          .addEventListener("input", atualizarCorFonte);
        document
          .getElementById("inputColor")
          .addEventListener("input", atualizarCorInput);
        document
          .getElementById("inputBorderColor")
          .addEventListener("input", atualizarCorBordaInput);
        document
          .getElementById("formWidth")
          .addEventListener("input", mudarLaguraInput);
        document
          .getElementById("formHeight")
          .addEventListener("input", mudarAlturaInput);
        document
          .getElementById("addLabel")
          .addEventListener("change", atualizarLabel);
        document
          .getElementById("addText")
          .addEventListener("input", atualizarTextoLabel);
        document
          .getElementById("choose-type")
          .addEventListener("change", atualizarTipoInput);
        document
          .getElementById("addPlaceholder")
          .addEventListener("input", atualizarPlaceholder);
        document
          .getElementById("addColor")
          .addEventListener("input", atualizarCorLabel);
        document
          .getElementById("titleFontSize")
          .addEventListener("input", atualizarTamanhoTitulo);
        document
          .getElementById("titleColor")
          .addEventListener("input", atualizarCorTitulo);
        document
          .getElementById("titleText")
          .addEventListener("input", atualizarTextoTitulo);
      }
      let elementoSelecionado = null;

      function abrirPropriedades(div) {
        const menu = document.querySelector(".specific-properties");

        if (elementoSelecionado === div && menu.classList.contains("active")) {
          menu.classList.remove("active");
          elementoSelecionado = null;
          return;
        }

        elementoSelecionado = div;
        menu.classList.add("active");

        const label = div.querySelector("label");
        const input = div.querySelector("input");

        document.getElementById("addLabel").checked = label.textContent !== "";
        document.getElementById("addText").value = label.textContent;
        document.getElementById("choose-type").value = input.type || "text";
        document.getElementById("addPlaceholder").value =
          input.placeholder || "";

        const verificarDirection = div.style.flexDirection === "row";
        document.getElementById("side").checked = verificarDirection;
      }

      function atualizarLabel(e) {
        if (!elementoSelecionado) return;
        const label = elementoSelecionado.querySelector("label");
        label.textContent = e.target.checked
          ? document.getElementById("addText").value
          : "";
      }

      function atualizarTextoLabel(e) {
        if (
          !elementoSelecionado ||
          !document.getElementById("addLabel").checked
        )
          return;
        elementoSelecionado.querySelector("label").textContent = e.target.value;
      }

      function atualizarTipoInput(e) {
        if (!elementoSelecionado) return;
        elementoSelecionado.querySelector("input").type = e.target.value;
      }

      function atualizarPlaceholder(e) {
        if (!elementoSelecionado) return;
        elementoSelecionado.querySelector("input").placeholder = e.target.value;
      }

      function mudarLaguraInput(e) {
        widthAtual = e.target.value + "px";
        let inputGroups = document.querySelectorAll(".input-group");
        for (let i = 0; i < inputGroups.length; i++) {
          inputGroups[i].style.width = widthAtual;
        }
        document.getElementById("widthValue").textContent =
          e.target.value + "px";
      }
      function mudarAlturaInput(e) {
        heightAtual = e.target.value + "px";
        let inputGroups = document.querySelectorAll(".input-group input");
        for (let i = 0; i < inputGroups.length; i++) {
          inputGroups[i].style.height = heightAtual;
        }
        document.getElementById("heightValue").textContent =
          e.target.value + "px";
      }

      document
        .getElementById("bgColor")
        .addEventListener("input", function (e) {
          document.querySelector(".form-box").style.backgroundColor =
            e.target.value;
        });

      document
        .getElementById("borderColor")
        .addEventListener("input", function (e) {
          document.querySelector(".form-box").style.outlineColor =
            e.target.value;
        });

      function atualizarCorInput(e) {
        let inputGroups = document.querySelectorAll(".input-group input");
        corInputAtual = e.target.value;
        for (let i = 0; i < inputGroups.length; i++) {
          inputGroups[i].style.backgroundColor = e.target.value;
        }
      }

      function atualizarCorBordaInput(e) {
        let inputGroups = document.querySelectorAll(".input-group input");
        corBorderAtual = e.target.value;

        for (let i = 0; i < inputGroups.length; i++) {
          inputGroups[i].style.borderColor = e.target.value;
        }
      }

      function atualizarCorFonte(e) {
        let inputGroups = document.querySelectorAll(".input-group input");
        corFonteAtual = e.target.value;
        for (let i = 0; i < inputGroups.length; i++) {
          inputGroups[i].style.color = e.target.value;
        }
      }
      function atualizarCorLabel(e) {
        elementoSelecionado.querySelector("label").style.color = e.target.value;
      }

      function atualizarTamanhoTitulo(e) {
        const titulo = document.querySelector(".form-box-title h2");
        if (titulo) {
          titulo.style.fontSize = e.target.value + "px";
          document.getElementById("titleSizeValue").textContent =
            e.target.value + "px";
        }
      }
      function atualizarCorTitulo(e) {
        console.log("Cor alterada para:", e.target.value);
        const titulo = document.querySelector(".form-box-title h2");
        if (titulo) {
          titulo.style.color = e.target.value;
        }
      }
      function atualizarTextoTitulo(e) {
        const titulo = document.querySelector(".form-box-title h2");
        if (titulo) {
          titulo.textContent = e.target.value;
        }
      }
    </script>
  </body>
</html>
